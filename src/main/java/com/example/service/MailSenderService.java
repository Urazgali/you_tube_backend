package com.example.service;import com.example.dto.ApiResponse;import com.example.dto.JwtDTO;import com.example.entity.ProfileEntity;import com.example.enums.ProfileStatus;import com.example.exception.AppBadRequestException;import com.example.repository.ProfileRepository;import com.example.util.JWTUtil;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.Optional;@Servicepublic class MailSenderService {    @Autowired    private ProfileRepository profileRepository;    public ApiResponse emailVerification(String jwt) {        JwtDTO jwtDTO = JWTUtil.decode(jwt);        Optional<ProfileEntity> exists = profileRepository.findByEmail(jwtDTO.getEmail());        if (exists.isEmpty()) {            throw new AppBadRequestException("Profile not found");        }        ProfileEntity entity = exists.get();        if (!entity.getStatus().equals(ProfileStatus.REGISTRATION)) {            throw new AppBadRequestException("Wrong status");        }        entity.setStatus(ProfileStatus.ACTIVE);        entity.setVisible(true);        profileRepository.save(entity); // update        return new ApiResponse(true, "Registration completed");    }}